# pages

## 手順

　新規コンテンツを追加するときは以下を実施してください。

1. 資材を準備する。
     - src/draftフォルダ配下にフォルダを作成してください。
       そこに変換対象となるテキストファイルを格納してください。
       必要に応じて materialサブフォルダを作成し、変換資材を格納してください。
     - docsフォルダ配下に、src/draftフォルダ配下と同じパスでフォルダを作成してください。
       必要に応じてスタイルシートや画像ファイルなどを格納してください。
2. 変換する。
     - src/yakumo/targets.tpacに変換対象についての設定を追記してください。
     - gradleコマンドを実行してください。
       gradle cleanコマンドで中間生成ファイルを削除できます。

## targets.tpac

　変換対象についてハンドルを記述してください。
　タグは "doc"を、名前は変換対象を格納したフォルダ名を指定してください。
　以下のキーを指定してください。

* mpath
    - 中間パス
    - 変換対象を格納したフォルダまでの中間パスを指定してください。
    - 省略時は src/draftフォルダ直下のフォルダ内に変換対象があるとみなします。
* design
    - ページデザインの種類
    - 必須
    - 以下のいずれかを指定してください。
        - novel
        - text
        - original
* font
    - フォント用のスタイルシート指定
    - デフォルト値
        - designが "novel"ならば serif
        - 上記以外は gothic
    - 以下のいずれかを指定してください。
        - gothic：ゴシック
        - serif：明朝体
* titleImage
    - タイトル画像へのパス
    - 指定なしの場合、headerタグ内には文字によるタイトルなどを表示します。
      指定ありの場合、タイトル画像へのパスとみなして headerタグ内にそれを表示します。
      タイトル画像は変換結果キーの値が "index"のときのみ表示します。
* catchImage
    - キャッチコピー画像へのパス
    - 指定なしの場合、表示しません。
      指定ありの場合、キャッチコピー画像へのパスとみなして headerタグの下に表示します。
      キャッチコピー画像は変換結果キーの値が "index"のときのみ表示します。
* catchAlt
    - キャッチコピー画像の説明文
    - catchImageの指定によってキャッチコピー画像を表示するときのみ有効です。
      キャッチコピー画像の alt属性に出力する値を指定します。
      デフォルト値は "キャッチコピー"です。
* tocAll
    - 総目次を表示するか否か
    - デフォルト値：need
    - 以下のいずれかを指定してください。
        - need：総目次を表示する。
        - noNeed：総目次を表示しない。
* keys
    - 変換対象キーのリスト
    - デフォルト値：変換対象のファイル名順
    - 総目次やナビゲーションリンクの順番も、この指定に従います。
* eachCss
    - 変換対象に固有のスタイルシートへのパス
    - designが "text"のときは無効です。
      designが "text"以外のとき、デフォルト値は "material/style.css"です。

　designの指定について詳細は以下のとおりです。

* 共通
    - "fyakumo", "thtml", src/yakumo/baseの変換資材を読みこみます。
    - 変換対象フォルダに materialフォルダがあれば変換資材として読みこみます。
* novel
    - 小説向け。
        - 明朝体の Google Fontsのスタイルシートを利用します。
        - 小説向けの共通のスタイルシートを利用します。
        - 変換結果フォルダの materialフォルダ内のスタイルシートを利用します。
        - src/yakumo/novelの変換資材を読みこみます。
* text
    - 雑文向け。
        - 雑文向けの共通のスタイルシートを利用します。
        - サイトヘッダ（アバター、タイトル、バナーのカルーセル）を表示します。
* original
    - 独自デザイン向け。
        - 共通のスタイルシートを利用します。
        - 変換結果フォルダの materialフォルダ内のスタイルシートを利用します。

　thtml資材に以下の拡張をしています。

* 共通
  - 隠蔽タグ
    - 文字列と背景色を同じにして、選択しなければ読めないようにします。
  - 著作権タグ
    - ページフッタに著作権を表示します。
* title, subtitleタグ
    - サブタイトルに英語のタイトル、サブタイトルを表示します。
  - 枚数タグ
    - 付帯情報として四百字詰め原稿用紙換算枚数を表示します。
